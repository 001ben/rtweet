<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>search_tweets — search_tweets • rtweet</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rtweet</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>search_tweets</h1>
    </div>

    
    <p>Returns two data frames (tweets data and users data)
  using a provided search query.</p>
    

    <pre><span class='fu'>search_tweets</span>(<span class='no'>q</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"recent"</span>, <span class='kw'>max_id</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>include_rts</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>parse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>usr</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>token</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>retryonratelimit</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>q</dt>
      <dd>Query to be searched, used to filter and select tweets
to return from Twitter&#39;s REST API. Must be a character string not
to exceed maximum of 500 characters. Spaces behave like boolean
&quot;AND&quot; operator. To search for tweets containing at least one of
multiple possible terms, separate each search term with spaces
and &quot;OR&quot; (in caps). For example, the search
<code>q = &quot;data science&quot;</code> looks for tweets containing both
&quot;data&quot; and &quot;science&quot; anywhere located anywhere in the tweets and
in any order. When &quot;OR&quot; is entered between search terms,
<code>query = &quot;data OR science&quot;</code>, Twitter&#39;s REST API should return
any tweet that contains either &quot;data&quot; or
&quot;science.&quot; It is also possible to search for exact phrases using
double quotes. To do this, either wrap single quotes around a
search query using double quotes, e.g.,
<code>q = &#39;&quot;data science&quot;&#39;</code> or escape each internal double quote
with a single backslash, e.g., <code>q = &quot;\&quot;data science\&quot;&quot;</code>.</dd>
      <dt>n</dt>
      <dd>Integer, specifying the total number of desired tweets to
return. Defaults to 100. Maximum number of tweets returned from
a single token is 18,000. To return more than 18,000 tweets, users
are encouraged to set <code>retryonratelimit</code> to TRUE. See details
for more information.</dd>
      <dt>type</dt>
      <dd>Character string specifying which type of search
results to return from Twitter&#39;s REST API. The current default is
<code>type = &quot;recent&quot;</code>, other valid types include
<code>type = &quot;mixed&quot;</code> and <code>type = &quot;popular&quot;</code>.</dd>
      <dt>max_id</dt>
      <dd>Character string specifying the [oldest] status
id beyond which search results should resume returning.
Especially useful large data returns that require multiple
iterations interrupted by user time constraints. For searches
exceeding 18,000 tweets, users are encouraged to take advantage
of rtweet&#39;s internal automation procedures for waiting on
rate limits by setting <code>retryonratelimit</code> argument to TRUE.
It some cases, it is possible that due to processing time and
rate limits, retreiving several million tweets can take several
hours or even multiple days. In these cases, it would likely be
useful to leverage <code>retryonratelimit</code> for sets of tweets
and <code>max_id</code> to allow results to continue where previous
efforts left off.</dd>
      <dt>include_rts</dt>
      <dd>Logical, indicating whether to include retweets
in search results. Retweets are classified as any tweet
generated by Twitter&#39;s built-in &quot;retweet&quot; (recycle arrows)
function. These are distinct from quotes (retweets with
additional text provided from sender) or manual retweets
(old school method of manually entering &quot;RT&quot; into the text
of one&#39;s tweets).</dd>
      <dt>parse</dt>
      <dd>Logical, indicating whether to return parsed
data.frame, if true, or nested list (fromJSON), if false. By default,
<code>parse = TRUE</code> saves users from the wreck of time and frustration
associated with disentangling the nasty nested list returned
from Twitter&#39;s API (for proof, check rtweet&#39;s Github commit history).
As Twitter&#39;s APIs are subject to change, this argument would be
especially useful when changes to Twitter&#39;s APIs affect performance of
internal parsers. Setting <code>parse = FALSE</code> also ensures the
maximum amount of possible information is returned. By default, the
rtweet parse process returns nearly all bits of information returned
from Twitter. However, users may occassionally encounter new or
omitted variables. In these rare cases, the nested list object will
be the only way to access these variables.</dd>
      <dt>usr</dt>
      <dd>Logical indicating whether to return a data frame of
users data. Users data is stored as an attribute. To access this
data, see <code><a href='users_data.html'>users_data</a></code>. Useful for marginal returns in
memory demand. However, any gains are likely to be negligible as
Twitter&#39;s API invariably returns this data anyway. As such, this
defaults to true, see <code><a href='users_data.html'>users_data</a></code>.</dd>
      <dt>token</dt>
      <dd>OAuth token. By default <code>token = NULL</code> fetches a
non-exhausted token from an environment variable. Find
instructions on how to create tokens and setup an environment
variable in the tokens vignette (in r, send <code>?tokens</code> to
console).</dd>
      <dt>retryonratelimit</dt>
      <dd>Logical indicating whether to wait and
retry when rate limited. This argument is only relevant if the
desired return (n) exceeds the remaining limit of available
requests (assuming no other searches have been conducted in the
past 15 minutes, this limit is 18,000 tweets). Defaults to false.
Set to TRUE to automate process of conducting big searches
(i.e., n &gt; 18000). For many search queries, esp. specific or
specialized searches, there won&#39;t be more than
18,000 tweets to return. But for broad, generic, or popular
topics, the total number of tweets within the REST window of
time (7-10 days) can easily reach the millions.</dd>
      <dt>verbose</dt>
      <dd>Logical, indicating whether or not to include
output processing/retrieval messages. Defaults to TRUE. For
larger searches, messages include rough estimates for time
remaining between searches. It should be noted, however, that
these time estimates only describe the amount of time between
searches and not the total time remaining. For large searches
conducted with <code>retryonratelimit</code> set to TRUE, the
estimated retreival time can be estimated by dividing the number
of requested tweets by 18,000 and then multiplying the quotient
by 15 (token cooldown time, in minutes).</dd>
      <dt>&#8230;</dt>
      <dd>Futher arguments passed on to <code>make_url</code>.
All named arguments that do not match the above arguments
(i.e., count, type, etc.) will be built into the request.
To return only English language tweets, for example, use
<code>lang = &quot;en&quot;</code>. For more options see Twitter&#39;s
API documentation.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>List object with tweets and users each returned as a
  data frame.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Twitter API documentation recommends limiting searches to
  10 keywords and operators. Complex queries may also produce
  API errors preventing recovery of information related to
  the query.
  It should also be noted Twitter&#39;s search API does not consist
  of an index of all Tweets. At the time of searching, the
  search API index includes between only 6-9 days of Tweets.</p>
    <p>Number of tweets returned will often be less than what was
  specified by the user. This can happen because (a) the search
  query did not return many results (the search pool is already
  thinned out from the population of tweets to begin with),
  (b) because user hitting rate limit for a given token, or (c)
  of recent activity (either more tweets, which affect pagination
  in returned results or deletion of tweets). To return more than
  18,000 tweets in a single call, users must set
  <code>retryonratelimit</code> argument to true. This method relies on
  updating the <code>max_id</code> parameter and waiting for token rate
  limits to refresh between searches. As a result, it is possible
  to search for 50,000, 100,000, or even 10,000,000 tweets, but
  these searches can take hours or even days. At these durations,
  it would not be uncommon for connections to timeout. Users are
  instead encouraged to breakup data retrieval into smaller chunks
  by leveraging <code>retryonratelimit</code> and then using the
  status_id of the oldest tweet as the <code>max_id</code> to resume
  searching where the previous efforts left off.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><a href = 'https://dev.twitter.com/overview/documentation'>https://dev.twitter.com/overview/documentation</a></p>
    <p>Other tweets: <code><a href='get_favorites.html'>get_favorites</a></code>,
  <code><a href='get_timeline.html'>get_timeline</a></code>,
  <code><a href='lookup_statuses.html'>lookup_statuses</a></code>,
  <code><a href='stream_tweets.html'>stream_tweets</a></code>, <code><a href='tweets_data.html'>tweets_data</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Not run: ------------------------------------</span>
<span class='co'># ## search for 1000 tweets mentioning Hillary Clinton</span>
<span class='co'># hrc &lt;- search_tweets(q = "hillaryclinton", n = 1000)</span>
<span class='co'># </span>
<span class='co'># ## data frame where each observation (row) is a different tweet</span>
<span class='co'># hrc</span>
<span class='co'># </span>
<span class='co'># ## users data also retrieved. can access it via users_data()</span>
<span class='co'># users_data(hrc)</span>
<span class='co'># </span>
<span class='co'># ## search for 1000 tweets in English</span>
<span class='co'># djt &lt;- search_tweets(q = "realdonaldtrump", n = 1000, lang = "en")</span>
<span class='co'># djt</span>
<span class='co'># users_data(djt)</span>
<span class='co'># </span>
<span class='co'># ## exclude retweets</span>
<span class='co'># rt &lt;- search_tweets("rstats", n = 500, include_rts = FALSE)</span>
<span class='co'># </span>
<span class='co'># ## perform search for lots of tweets</span>
<span class='co'># rt &lt;- search_tweets("trump OR president OR potus", n = 100000,</span>
<span class='co'>#                     retryonratelimit = TRUE)</span>
<span class='co'># </span>
<span class='co'># ## plot time series of tweets frequency</span>
<span class='co'># ts_plot(rt, by = "mins", theme = "spacegray",</span>
<span class='co'>#         main = "Tweets about Trump")</span>
<span class='co'># </span>
<span class='co'>## ---------------------------------------------</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Kearney Michael.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
